# Boardアプリ DB移行計画

## 概要
Boardアプリのデータ管理をJSONファイルからSQLiteデータベースに移行する計画。開発段階のため、実データ移行は不要で、構造変更に焦点を当てる。

## 目的
- 同時アクセス時のデータ競合を防ぐ。
- データ管理の安定性と保守性を向上。
- アプリごとのDB分離を実現（board.db を boardフォルダ内に設置）。

## 作業手順

### 1. 準備
- SQLiteが利用可能か確認（requirements_server.txt参照）。

### 2. DBテーブル定義
- `table_definition.md`を参照。

### 3. コード修正
- `blueprint.py` を修正：
  - DATABASE パスを `board.db` に設定。
  - `get_db()`, `init_db()` 関数を追加。
  - 投稿追加・取得関数をDB操作に変更。
  - アーカイブ機能をDB内で管理（JSON出力不要）。

### 4. テスト
- ローカルでサーバー起動。
- 投稿機能の動作確認（追加・表示）。
- 過去投稿の読み込み機能確認（DBから全データ取得）。
- 複数タブでの同時アクセステスト（競合確認）。

### 5. 完了確認
- JSONファイル（posts.json, log/フォルダ）の削除。
- コミット・プッシュ。

## 注意点
- 開発段階のため、実データ移行は不要。
- エラーハンドリングを強化（DB接続失敗時）。
- 将来の拡張性を考慮（他のアプリのDB追加時）。

## リスク
- DBファイルの破損リスク（バックアップ推奨）。
- コード変更によるバグ発生（テスト必須）。